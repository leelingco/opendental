//
// Translated by CS2J (http://www.cs2j.com): 2/15/2016 8:01:41 PM
//

package MobileWeb;

import CS2JNet.JavaSupport.language.RefSupport;
import CS2JNet.System.StringSupport;
import MobileWeb.Util;
import OpenDentBusiness.Mobile.Patientm;
import OpenDentBusiness.Mobile.Patientms;
import WebForms.Logger;


//------------------------------------------------------------------------------// <auto-generated>//     This code was generated by a tool.////     Changes to this file may cause incorrect behavior and will be lost if//     the code is regenerated.// </auto-generated>//------------------------------------------------------------------------------
public class PatientList  extends System.Web.UI.Page 
{

    private long CustomerNum = 0;
    private String searchterm = "";
    private Util util = new Util();
    private List<Patientm> patientmList = new List<Patientm>();
    protected void page_Load(Object sender, EventArgs e) throws Exception {
        try
        {
            CustomerNum = util.GetCustomerNum(Message);
            if (CustomerNum == 0)
            {
                return ;
            }
             
            if (Request["searchterm"] != null)
            {
                searchterm = Request["searchterm"].Trim();
            }
             
            if (!StringSupport.equals(searchterm, ""))
            {
                patientmList = Patientms.getPatientms(CustomerNum,searchterm);
                if (patientmList.Count == 0)
                {
                    MessageNoPatients.Text = "No patients found. Please search again.";
                }
                 
            }
             
            Repeater1.DataSource = patientmList;
            Repeater1.DataBind();
        }
        catch (Exception ex)
        {
            LabelError.Text = Util.ErrorMessage;
            Logger.logError(ex);
        }
    
    }

    public String getPatientName(long PatNum) throws Exception {
        return util.getPatientName(PatNum,CustomerNum);
    }

    private boolean setCustomerNum() throws Exception {
        Message.Text = "";
        if (Session["CustomerNum"] == null)
        {
            return false;
        }
         
        RefSupport refVar___0 = new RefSupport();
        Int64.TryParse(Session["CustomerNum"].ToString(), refVar___0);
        CustomerNum = refVar___0.getValue();
        if (CustomerNum != 0)
        {
            Message.Text = "LoggedIn";
        }
         
        return true;
    }

    /**
    * Message control.
    * 
    * Auto-generated field.
    * To modify move field declaration from designer file to code-behind file.
    */
    protected System.Web.UI.WebControls.Literal Message = new System.Web.UI.WebControls.Literal();
    /**
    * LabelError control.
    * 
    * Auto-generated field.
    * To modify move field declaration from designer file to code-behind file.
    */
    protected System.Web.UI.WebControls.Label LabelError = new System.Web.UI.WebControls.Label();
    /**
    * MessageNoPatients control.
    * 
    * Auto-generated field.
    * To modify move field declaration from designer file to code-behind file.
    */
    protected System.Web.UI.WebControls.Literal MessageNoPatients = new System.Web.UI.WebControls.Literal();
    /**
    * Repeater1 control.
    * 
    * Auto-generated field.
    * To modify move field declaration from designer file to code-behind file.
    */
    protected System.Web.UI.WebControls.Repeater Repeater1 = new System.Web.UI.WebControls.Repeater();
}


